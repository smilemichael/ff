<?php
	#modulesForLaterUse.php	
	$loggedIn =  false;
?>
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="author" content="Marcian Diamond">
		<title>SCVWD Flood Forecast System</title>
		<link rel="shortcut icon" href="assets/images/favicon.ico">
		<!--stylesheets -->
    	<link rel="stylesheet" href="assets/css/OL/theme/default/style.css" type="text/css">
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
		<link rel="stylesheet" href="assets/css/custom.css" type="text/css">
	</head>
	<body onload="init()">
		<div id="dialog-message" title="Disclaimer" style="display:none;width:400px;">
			<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 0 0;"></span>
			<p>
				The flood forecasts and predicted inundation areas are generated by the Santa Clara Water District using data collected from multiple other sources, including the National Weather Service. As with all weather forecasts, information is not guaranteed to be accurate, current or complete, and the tools used to predict the flooding areas are not guaranteed to be accurate either. Therefore, this website is designed as an informational tool to aid in disaster preparation. Information is provided as-is, and the use of the data provided by this website is solely at your own risk.
			</p>
			<p>
				Recommended browsers: Google Chrome, Mozilla Firefox
			</p>
		</div>
		<div id="myNav">
				<div id="logo" style="display:inline;margin-left:10px;">
					<a href="http://www.valleywater.org">
						<img id="imgLogo" src="assets/images/logo.gif" height="48" width="219">
					</a>
				</div>
				<div class="pull-right" style="display:inline!important; margin-top:10px;">
					<span class="glyphicon glyphicon-search" title="View Select" style="display:inline;">&nbsp</span>
					<select id="sbGageSelect" class="form-control" style="display:inline;width:135px;margin-right:25px;">
				  		<option selected="selected" disabled="disabled" value="default">Gage Select</option>
				  		<option value="ForecastStreamFlow.1">Ross Ck. at Cherry Ave.</option>
						<option value="ForecastStreamFlow.2">Upper Guadalupe above Branham Ln.</option>
						<option value="ForecastStreamFlow.4">West Little Llagas blw Edmundson Ave.</option>
						<option value="ForecastStreamFlow.3">San Francisquito CK. at Stanford</option>
					</select>
					<span class="glyphicon glyphicon-eye-open" title="View Select" style="display:inline;">&nbsp</span>
					<select id="sbViewSelect" class="form-control" style="display:inline;width:125px;margin-right:25px;">
				  		<option selected="selected" disabled="disabled" value="default">View Select</option>
				  		<option value="county">County</option>
						<option value="losAltos">Los Altos</option>
						<option value="milpitas">Milpitas</option>
						<option value="paloAlto">Palo Alto</option>
						<option value="sanJose">San Jose</option>
						<option value="santaClara">Santa Clara</option>
						<option value="sunnyvale">Sunnyvale</option>
					</select>
				</div>
		</div><!--end navbar-->
		<div id="map"></div>
		<!-- hide mouseposition, position only used for tooltips -->
		<div id="mousePosition" style="visibility:hidden;"></div>
		<!-- popup div for tooltips over forecast gages -->
		<div class="popup" id="tooltip" style="visibility: hidden;"></div>
		<div id="helpBox" style="display:none;z-index: 2000;">
			<span id='closeHelpBox' title='close'>X</span>
			<p id="helpBoxText"></p>
			<!-- <p><a id="closeHelpBox" style="cursor:pointer;">[close]</a></p> -->
		</div>
		<!--flood forecast gage information in jQuery UI tabs -->
		
		<div id="forecastInfo">
			<ul>
				<li><a href="#fc-tabs-1">Flood Forecast Information</a></li>
				<li><a href="#fc-tabs-2">Gage Details</a></li>
				<li><a href="#fc-tabs-3">1% Flood Demo</a></li>
				<li><a href="#fc-tabs-4">ALERT Me</a></li>
				<!-- todo add slide down/up button functionality to hide tabbed pane -->
				<!-- <li style="margin-left:50px;">Test</li> -->
			</ul>
			<div id="fc-tabs-1" style="white-space: nowrap;">
					<div id="fcPlot">
						loading hydrograph...<img src='assets/images/ajax-loader.gif'/>
					</div>
			</div>
			<div id="fc-tabs-2">
				<div id="fcGageInfo">
				</div> 
			</div>
			<div id="fc-tabs-3">
				<div class="row">
					<div class="col-md-12" style="display:inline;">
						<div id="demoControls" style="display:inline;">
							<p><strong>Please Select Flood Event</strong><img id='floodEventHelpIcon' style="margin-left:10px;" src="assets/images/helpIcon15px.png"/></p>
							<hr/>
							<select id ="floodDemoSelect" class="form-control" style="width:200px;display:inline;">
								<option value="default" selected="selected" disabled="disabled">Choose...</option>
								<option value="2year">50% (2 year)</option>
								<option value="5year">20% (5 year)</option>
								<option value="10year">10% (10 year)</option>
								<option value="25year">4% (25 year)</option>
								<option value="50year">2% (50 year)</option>
								<option value="100year">1% (100 year)</option>
							</select>
						</div>
						<button class="btn btn-primary" id="btnClearDemoSpill" disabled style="display:inline;margin-left:20px;margin-bottom:5px;">Clear Spill Layer</button>
					</div>
				</div>
			</div>
			<div id="fc-tabs-4">
				<!--Alert Me functionality in external file-->
			</div>
		</div>
		<!--load scripts at end of page -->
		<!--google maps, openlayers, proj4js -->
		<script src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false&amp;key=AIzaSyB7Ndq60bsM6G2DvKY7SGEbf7vsSa_2Eg8"></script>
		<script src="http://openlayers.org/api/OpenLayers.js"></script>
    	<script src="//cdnjs.cloudflare.com/ajax/libs/proj4js/2.2.2/proj4-src.js"></script>

    	<!--jQuery, jQueryUI, bootstrap, highcharts-->
		<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
		<!--<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>-->
		<script src="//code.highcharts.com/highcharts.js"></script>
		<!-- jquery validation scripts -->
		
		<script src="assets/js/plots/flowData.js"></script>
		<script src="assets/js/map.js"></script>
		<script src="assets/js/Gage_Spill_Plot_Init.js"></script>
		<script>
			function showHelpBox(hbText, x, y){
				$('#helpBox').css('top', y +'px');
				$('#helpBox').css('left', x +'px');
				$('#helpBoxText').html(hbText);

				// $('#helpBox').css('display', 'block');
				$('#helpBox').fadeIn( "slow", function() {
				    // Animation complete
				 });
				helpBoxOpen = true;
			}
			//Globals
			var stationNumber = null; //currently selected station number
			var selectedStation = null;
			var previousStation = null; //previously selected station, for switching off spill layers
 			var floodEventHelpText = "A hypothetical flood of a certain chance that is based on historically recorded data. For more information: <a href='http://water.usgs.gov/edu/100yearflood.html' target='_blank'>http://water.usgs.gov/edu/100yearflood.html</a>";
 			var helpBoxOpen = false;

			$(document).ready(function () {
				//display alert upon site entrance
			 	$( "#dialog-message" ).dialog({
		      		modal: true,
		       		minWidth: 500,
		       		draggable: true,
		       		resizable: false,
			      	buttons: {
				        Ok: function() {
			          			$(this).dialog("close");
			        		}
			      	}
			    });

			    var currentMousePos = { x: -1, y: -1 };
			    $(document).mousemove(function(event) {
			        currentMousePos.x = event.pageX;
			        currentMousePos.y = event.pageY;
			    });

			 	$("#closeHelpBox").on('click',function(){
			 		$('#helpBox').fadeOut('slow');
					helpBoxOpen = false;

			 	});
			 	$('#floodEventHelpIcon').on("mouseover", function(){
			 		if(!helpBoxOpen){
			 		 	var xy = map.getControl('mousePositionControl').lastXy || { x: 0, y: 0 };
						// $('#helpBox').css('display', 'block');
						showHelpBox(floodEventHelpText, currentMousePos.x, currentMousePos.y);
					}
			 	});
				
			});
		</script>
	</body>
</html>